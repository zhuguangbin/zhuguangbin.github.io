
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Data Talks</title>
  <meta name="author" content="Zhu Guangbin">

  
  <meta name="description" content="为了测试Shark和Hive的执行效率，今天做了下Benchmark的测试对比，测试性能非常满意，虽然没有达到官方宣称的100倍，但至少10倍的性能提升。 ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zhuguangbin.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Data Talks" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zhuguangbin.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Data Talks
        </span>
       
           <span class="blue_dark">
             Play with Hadoop/Hive/HBase/Spark/Shark
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/23/shark-vs-hive-benchmark-test/">Shark vs Hive Benchmark Test</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-23T13:42:00+08:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/07/23/shark-vs-hive-benchmark-test/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>为了测试Shark和Hive的执行效率，今天做了下Benchmark的测试对比，测试性能非常满意，虽然没有达到官方宣称的100倍，但至少10倍的性能提升。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/23/shark-vs-hive-benchmark-test/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/21/shark-deploy/">Shark安装部署与应用</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-21T23:07:00+08:00" pubdate data-updated="true">Jul 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/07/21/shark-deploy/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>  在搭建部署Spark之后，我们又引入了<a href="https://github.com/amplab/shark/wiki">Shark</a>，一个基于Spark的SQL引擎来替换Hive作为adhoc query engine。我的<a href="http://zhuguangbin.github.io/blog/2013/07/09/shark-introduction/">这篇博客</a>对Shark有简单的介绍。
  我们引入Shark是希望利用Spark的性能，提高Hive的执行效率，提供adhoc的interactive的快速查询，并与Spark集成访问Shark的表数据做一些interative算法比如Machine Learning。这样我们的在Hadoop上的任务可以分为以下几类：</p>

<ol>
<li> Batch Job：如ETL，全量历史记录数据处理与统计等等，采用MapReduce Job或者Hive Job。</li>
<li> Adhoc Query：如ba的报表统计，销售人员的临时查询等等，采用Shark Job。</li>
<li> Interative Job：如算法组的个性化推荐，采用Shark或者Spark Job。</li>
<li> Streaming Job：如实时推荐，采用Storm或者Spark-Streaming。</li>
</ol>


<p>  本篇首先介绍Shark的安装部署配置，然后介绍我们在将Shark集成到我们的Hadoop集群中遇到的一些坑和我们的解决方案。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/21/shark-deploy/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-programming-examples/">Spark Programming Examples</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T17:27:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-programming-examples/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-programming-user-guide-for-javauser/">Spark Programming User Guide for Java User</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T16:47:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-programming-user-guide-for-javauser/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-programming-user-guide-for-scalauser/">Spark Programming User Guide for Scala User</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T16:37:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-programming-user-guide-for-scalauser/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>概述</h3>

<p>  上一节简单介绍了如何搭建Spark的本地开发环境，并示例了一个SparkHelloWorld project。本节详细介绍Spark的Scala API，并介绍Spark编程的高级特性。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/16/spark-programming-user-guide-for-scalauser/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-programming-user-guide-basic/">Spark Programming User Guide Basic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T16:27:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-programming-user-guide-basic/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>开发环境搭建</h3>

<p>  开发Spark最便捷的方式就是利用spark-shell，交互式编程。参考<a href="http://localhost:4000/blog/2013/07/16/spark-deploy/">安装部署篇</a>本地模式，在本地部署好Spark，打开spark-shell即可。</p>

<p>  另一种方式是在自己的project中引用spark的包，开发standalone的Spark Job。用户可以选择自己喜欢的构建工具（sbt/maven etc），构建一个Scala Project，只需要引入spark的包即可。推荐采用sbt构建项目，用eclipse的scala-ide进行开发。下节简单介绍一个简单的SparkHelloWorld项目的构建和开发步骤。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/16/spark-programming-user-guide-basic/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-deploy/">Spark安装部署篇</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T11:58:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-deploy/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>  Spark有以下四种运行模式：</p>

<ul>
<li>local: 本地单进程模式，用于本地开发测试Spark代码</li>
<li>standalone：分布式集群模式，Master-Worker架构，Master负责调度，Worker负责具体Task的执行</li>
<li>on yarn/mesos: ‌运行在yarn/mesos等资源管理框架之上，yarn/mesos提供资源管理，spark提供计算调度，并可与其他计算框架(如MapReduce/MPI/Storm)共同运行在同一个集群之上</li>
<li>on cloud(EC2): 运行在AWS的EC2之上</li>
</ul>


<p>本章主要介绍本地模式和standalone模式的安装部署配置。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/16/spark-deploy/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-core-concept/">Spark核心思想篇</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T10:58:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-core-concept/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Spark的核心思想是RDD，以及对RDD的操作（transformation/action）。本篇简单介绍这些基本概念，以有利于理解Spark的原理。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/16/spark-core-concept/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/16/spark-intro/">Spark简介</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-16T09:58:00+08:00" pubdate data-updated="true">Jul 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/16/spark-intro/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://spark-project.org/">Spark</a>是UC Berkeley大学<a href="https://amplab.cs.berkeley.edu/">AMPLAB</a>开源的分布式处理框架。目前已贡献给Apache社区，成为<a href="http://wiki.apache.org/incubator/SparkProposal">inbubator项目</a>。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/16/spark-intro/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/09/shark-introduction/">Shark初窥</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-09T16:27:00+08:00" pubdate data-updated="true">Jul 9<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/07/09/shark-introduction/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Shark简介</h2>

<p>   Shark[1]是UC Berkeley AMPLAB开源的一款数据仓库产品，它完全兼容Hive的HQL语法，但与Hive不同的是，Hive的计算框架采用MapReduce，而Shark采用Spark（也是AMPLAB开源的分布式计算框架，充分利用内存，适合于迭代计算，官方宣称性能比MapReduce好100倍）。所以Hive是SQL on MapReduce，而Shark是Hive on Spark。以下是官方简介：</p>

<blockquote><p>Shark is a large-scale data warehouse system for Spark designed to be compatible with Apache Hive. It can answer Hive QL queries up to 100 times faster than Hive without modification to the existing data nor queries. Shark supports Hive&rsquo;s query language, metastore, serialization formats, and user-defined functions.</p></blockquote>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/09/shark-introduction/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <div style="margin-top:15px; ">
<img style="" class="left" src="http://m.c.lnkd.licdn.com/media/p/4/000/159/074/24c4d84.jpg">
<p><a href="http://zhuguangbin.github.io">Zhu Guangbin</a></p>
<p>Senior Software Engineer @DianPing</p>
<br>
<p>Focusing on BigData, <br>
Play with Hadoop/Hive/HBase/Spark/Shark</p>
Linkedin: <a href="http://www.linkedin.com/in/zhuguangbin">Zhu Guangbin</a><br>
SinaWeibo: <a href="http://weibo.com/2406795361/profile">BigDataPlayer</a><br>
Email: <a href="mailto:zhu.guangbin86@gmail.com">zhu.guangbin86@gmail.com</a><br>
</div>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/shark/'>Shark (2)</a></li>
<li class='category'><a href='/blog/categories/spark/'>Spark (7)</a></li>
<li class='category'><a href='/blog/categories/unknown/'>unknown (1)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/23/shark-vs-hive-benchmark-test/">Shark vs Hive Benchmark Test</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/21/shark-deploy/">Shark安装部署与应用</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/16/spark-programming-examples/">Spark Programming Examples</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/16/spark-programming-user-guide-for-javauser/">Spark Programming User Guide For Java User</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/16/spark-programming-user-guide-for-scalauser/">Spark Programming User Guide For Scala User</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Zhu Guangbin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'zhuguangbin';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
